<html>
<head>
    <title>GPS</title>
    <script>
        function obterLocalizacao() {
            if ("geolocation" in navigator) {
                navigator.geolocation.getCurrentPosition(function(position) {
                    var latitude = position.coords.latitude;
                    var longitude = position.coords.longitude;

                    // Enviar localização para o servidor
                    enviarLocalizacao(latitude, longitude);
                });
            } else {
                alert("Geolocalização não é suportada neste navegador.");
            }
        }

        function enviarLocalizacao(latitude, longitude) {
            let x = Math.random() * 1000;
            var num_str = x.toString()
            fetch("http://localhost:5000/SalvarLocalizacao", {
                method: "POST",
                body: JSON.stringify({
                    latitude: latitude,
                    longitude: longitude,
                    id: num_str
                }),
                headers: {
                    "Content-type": "application/json; charset=UTF-8"
                }
            });

            // var xhr = new XMLHttpRequest();
            // xhr.open("POST", "SalvarLocalizacao", true);
            // xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
            // xhr.send("latitude=" + latitude + "&longitude=" + longitude);
        }
    </script>
</head>
<body>
    <h1>GPS</h1>
    <button onclick="obterLocalizacao()">Get LatLong</button>

    <div>
        {% for dado in dados %}
                <h1>
                    {{dado}}
                </h1>
        {% endfor %}
    </div>
</body>
</html>